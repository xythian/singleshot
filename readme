Singleshot
==========

Web page
--------

Singleshot's home page is 
   http://www.singleshot.org/
   
There you will find this information as well as the current release.


Overview
--------

Web-based photo album software that requires minimal work after initial
setup. There is no external data and your album hierarchy can be maintained
by updating the files and directories in that tree. The administrator of the
singleshot installation can use Web server permissions to restrict access to
albums.

Singleshot does not require a special process or program for sharing photos.
You post the photos to your albums using the file upload program of your
choice.


Requirements
------------

You will need the following software installed on your web server
to install Singleshot.

   * Apache http://www.apache.org/ with mod_rewrite
   * Python 2.2+ http://www.python.org/
   * ImageMagick http://www.imagemagick.org
   * libjpeg http://www.ijg.org/ (for edit mode only)

Singleshot relies on setting mod_rewrite directives in .htaccess.
This facility needs to be enabled on the web server.

You will also need an appropriate unpacking tool (unzip or
tar/gunzip) to unpack the Singleshot archive.

Definitions
-----------

album root
    The directory that will become the root album of your new
Singleshot installation. Apache needs to be configured to serve this
directory.

singleshot directory
    The directory named "singleshot" that contains all of the scripts
and templates used by singleshot.

.htaccess
    File with directives to Apache to set up permissions, rewrite
rules, or other options. Singleshot comes with two of these, one for
the singleshot directory and one for the album root.

Instructions
------------

Instructions

1. Download and unpack Singleshot.

2. Copy the "singleshot" directory in the archive to your album root.

3. If your platform doesn't have /usr/bin/env (this is a common part
of the operating system) you will need to edit resize.py and
singleshot.py in the singleshot directory to have the correct path to
python 2.1 or later. Change the first line (the one that starts with
#!) to be something like /usr/local/bin/python2.2

4. Copy the "root-htaccess" file to ".htaccess" in your album root.

5. Make an empty directory named "view" in the album root
directory. Ensure this directory is writable by the singleshot CGI
script. If the CGI script is running under suEXEC, this should already
be true since it will be running as your user. If not, the view
directory may need to be world or group writable by the web server
process.

   6. Update the root .htaccess file's RewriteBase to reflect the URL
for that directory.

7. Create a _singleshot.cfg in the album root similar to the following.

[singleshot]
url_prefix=/pics/          ; url for the album root

[paths]
imagemagick=/usr/local/bin ; path to directory with ImageMagick binaries
libjpegbin=/usr/local/bin  ; path to directory with libjpeg binaries


8. Fill your new albums with images. You can put them in the root or
in subdirectories. Do not use filenames with - (dash) in
them. Singleshot uses -size suffixes internally and will not be happy
if your image names have similar components.

Other configurable things
-------------------------

_singleshot.cfg can also have (and default to the values below):

[templates]
view=view.tmpl               ; global default view (image file) template
album=album.tmpl             ; global default album (directory) template

[imagesizes]
mini=40
thumb=200
view=600
large=1200

[edit]
password = singleshot
enabled = false              ; this must be 'true' to enable edit mode

The templates section is pretty self-explanatory.
The imagesizes section is very important:  it limits what sizes of images can be requested
from your album originals.  With the above configuration, downloads are limited to a max of
40, 200, 600, or 1200 pixels on a side. (That is, any picture downloaded will be scaled down from
the original size to one of the appropriate sizes)  In a template, referring to a size by
number means 'show me that size or nothing', but referring to a size by name means 'show me
a permitted size no larger than the one I asked for'.



_album.cfg in every directory can have:

    [album]
    title=foo                ; sets the title of the album to foo
    highlightimage=file.jpg  ; uses file.jpg (in the current dir) as the 'cover' of the album
                             ; default is to use the first image in the directory
    order=dir,title,-mtime   ; sort order for display.  Valid orders are:
                             ;   title, dir, mtime, exifdate, name, href
                             ;  prepending '-' sorts in descending order instead of ascending 

    [templates]
    album=bar.tmpl  # uses bar.tmpl (in the template directory) as the album (directory) template
    view=baz.tmpl   # uses baz.tmpl (in the template directory) as the view (image file) template


